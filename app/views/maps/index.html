<h1>Block Value</h1>

<canvas class="map" width="2000" height="500"></canvas>

<div class="paintbrush-settings">
  <label for="stroke-size">Brush Size:</label>
  <input id="stroke-size" type="range" name="stroke-size" min="1" max="30" value="10" data-sizing="px">
</div>

<div class="color-picker">
  <div class="red" data-color="red">
    <span>Concrete</span>
  </div>
  <div class="yellow" data-color="yellow">
    <span>Setback</span>
  </div>
  <div class="green" data-color="green">
    <span>Building</span>
  </div>
  <div class="blue" data-color="blue">
    <span>Sidewalks</span>
  </div>
  <div class="black" data-color="black">
    <span>???</span>
  </div>
</div>

<script>

  var colors = document.querySelectorAll(".color-picker div")
  var mouseDown = false
  const canvas = document.querySelector('.map')
  const ctx = canvas.getContext('2d')
  let brushSize = 10

  // canvas.width = window.innerWidth
  // canvas.height = window.innerHeight

  ctx.fillRect(0,0,10,10)
  ctx.fillStyle = "#ffff00"
  // ctx.lineCap = 'round'
  ctx.lineWidth = 10


  function drawShit() {
    let x = event.offsetX
    let y = event.offsetY
    ctx.globalAlpha = 0.3;
    // ctx.globalCompositeOperation = 'source-in'

    if(!mouseDown) return;
    ctx.beginPath();
    ctx.moveTo(x,y)
    // ctx.lineTo(x, y)

    ctx.fillRect(x, y, brushSize, brushSize)
    ctx.stroke();
      // send this shit to server eventually
      // console.log(
      //   event.offsetX,
      //   event.offsetY,
      // );
  }


  function setColor(){
    ctx.fillStyle = this.dataset.color
  }

  function setBrushSize() {
    brushSize = this.value
  }

  $(function () {

    colors.forEach(picker => picker.addEventListener('click', setColor))

    $(".map").on('mousedown', function() {
        mouseDown = true
    })

    $(".map").on('mouseup', function() {
        mouseDown = false
    })

    $(".map").on('mouseout', function() {
        mouseDown = false
    })
    $(".map").on('mousemove', drawShit)

    $(".paintbrush-settings input").on('change', setBrushSize)
    $(".paintbrush-settings input").on('mousemove', setBrushSize)

  })


</script>

<style>

  * {
    box-sizing: border-box;
    padding: 0;
    margin: 0;
  }

  body {
    font-family: "Helvetica Neue", "Helvetica", sans-serif;
  }

  .map {
    border: solid 0.3em;
    /*width: 2000;
    height: 500px;*/
    background-color: black;
    background-image:url('/assets/bg_golden_small.jpg');
    background-size: auto;
  }

  .color-picker {
    width: 100%;
    height: 10px;

  }
  .color-picker div {
    padding: 2em;
    width: 20%;
    float: left;
  }

  .color-picker div span {
    color: #fff;
    font-size: 2em;
    text-shadow: 1px 1px 1px #000;
  }

  .color-picker div.red {
    background-color:red;
  }
  .color-picker div.yellow {
    background-color: yellow;
  }
  .color-picker div.green {
    background-color: green;
  }
  .color-picker div.blue {
    background-color: blue;
  }
  .color-picker div.black {
    background-color: black;
  }

  .paintbrush-settings * {
    /*display: flex;
    flex-direction: column;
    flex: 0 1 auto;*/

    color: grey;
    font-size: 2em;
    text-shadow: 1px 1px 1px #000;
    width: 20%;
    height: 20px;

  }

</style>
